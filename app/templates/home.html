{% extends "base.html" %}

{% block title %}국회.gg - 22대 국회의원 활동 대시보드{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">TOP 5 챔피언</h2>
            
            <!-- 차트 영역 -->
            <div class="card mb-4">
                <div class="card-body">
                    <canvas id="topScoreChart" height="200"></canvas>
                </div>
            </div>
            
            <!-- 상위 의원 정보 영역 -->
            <div class="row">
                {% for legislator in top_legislators %}
                <div class="col-md-2 mb-4">
                    <div class="card h-100">
                        <img src="{{ legislator.profile_image_url }}" class="card-img-top" alt="{{ legislator.name }}">
                        <div class="card-body text-center">
                            <h5 class="card-title">{{ legislator.name }}</h5>
                            <p class="card-text">{{ legislator.party }}</p>
                            <div class="badge bg-primary mb-2">{{ legislator.tier }}</div>
                            <p>종합 점수: {{ legislator.overall_score }}</p>
                            <a href="/champions/{{ legislator.id }}" class="btn btn-sm btn-outline-primary">상세 정보</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- 차트 스크립트 -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    var ctx = document.getElementById('topScoreChart').getContext('2d');
    var chartData = {{ chart_data|tojson }};
    
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: chartData.labels,
            datasets: chartData.datasets
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
});
</script>
{% endblock %}